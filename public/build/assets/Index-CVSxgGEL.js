import{u as v,c as h,w as V,a as U,b as o,h as C,d as e,o as r,e as a,F as f,r as x,t as m,i as p,k as y,v as b,j as c,g as S,s as N}from"./app-DLFWu2pM.js";import{_ as F}from"./AuthenticatedLayout-D2IAWebU.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevron-right-CVDsDfDd.js";const $={class:"grid gap-6 py-4 lg:grid-cols-3"},A={class:"panel p-6 lg:col-span-2"},M={class:"mt-4 divide-y divide-slate-100"},R={class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},T={class:"text-base font-semibold text-slate-900"},j={class:"text-sm text-slate-500"},D={class:"flex flex-col gap-2 md:flex-row md:items-center"},E=["onUpdate:modelValue"],I=["value"],L=["onUpdate:modelValue"],P=["onClick","disabled"],q=["onClick","disabled"],z={key:0,class:"text-sm text-rose-600"},G={key:0,class:"py-4 text-sm text-slate-500"},H={class:"panel p-6"},J={key:0,class:"form-error"},K={key:0,class:"form-error"},O={key:0,class:"form-error"},Q=["value"],W=["disabled"],X={__name:"Index",props:{users:Array,roles:Array},setup(u){const _=u,l=v({name:"",email:"",password:"",role:"token_operator"}),n=_.users.reduce((d,s)=>(d[s.id]=v({name:s.name,role:s.roles[0]?.name??"token_operator",password:""}),d),{}),w=()=>{l.post(route("admin.users.store"),{onSuccess:()=>l.reset("name","email","password")})},g=d=>{n[d].put(route("admin.users.update",d),{preserveScroll:!0,onSuccess:()=>n[d].reset("password")})},k=d=>{confirm("Remove this team member?")&&N.delete(route("admin.users.destroy",d))};return(d,s)=>(r(),h(F,null,{default:V(()=>[U(o(C),{title:"Team"}),e("div",$,[e("section",A,[s[4]||(s[4]=e("h3",{class:"text-lg font-semibold text-slate-900"},"Current team",-1)),s[5]||(s[5]=e("p",{class:"text-sm text-slate-500"},"Promote or reset passwords.",-1)),e("div",M,[(r(!0),a(f,null,x(u.users,t=>(r(),a("div",{key:t.id,class:"py-4"},[e("div",R,[e("div",null,[e("p",T,m(t.name),1),e("p",j,m(t.email),1)]),e("div",D,[p(e("select",{"onUpdate:modelValue":i=>o(n)[t.id].role=i,class:"rounded-lg border border-slate-200 px-3 py-2 text-sm"},[(r(!0),a(f,null,x(u.roles,i=>(r(),a("option",{key:i,value:i},m(i),9,I))),128))],8,E),[[y,o(n)[t.id].role]]),p(e("input",{"onUpdate:modelValue":i=>o(n)[t.id].password=i,type:"password",placeholder:"New password (optional)",class:"rounded-lg border border-slate-200 px-3 py-2 text-sm"},null,8,L),[[b,o(n)[t.id].password]]),e("button",{class:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white",onClick:i=>g(t.id),disabled:o(n)[t.id].processing}," Save ",8,P),e("button",{class:"rounded-lg border border-rose-200 px-4 py-2 text-sm font-semibold text-rose-600",onClick:i=>k(t.id),disabled:t.id===d.$page.props.auth.user.id}," Remove ",8,q)])]),o(n)[t.id].errors.role?(r(),a("p",z,m(o(n)[t.id].errors.role),1)):c("",!0)]))),128)),u.users.length?c("",!0):(r(),a("p",G,"No team members yet."))])]),e("section",H,[s[10]||(s[10]=e("h3",{class:"text-lg font-semibold text-slate-900"},"Invite leader",-1)),e("form",{class:"mt-4 space-y-4",onSubmit:S(w,["prevent"])},[e("div",null,[s[6]||(s[6]=e("label",{class:"form-label"},"Name",-1)),p(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>o(l).name=t),class:"form-input"},null,512),[[b,o(l).name]]),o(l).errors.name?(r(),a("p",J,m(o(l).errors.name),1)):c("",!0)]),e("div",null,[s[7]||(s[7]=e("label",{class:"form-label"},"Email",-1)),p(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>o(l).email=t),type:"email",class:"form-input"},null,512),[[b,o(l).email]]),o(l).errors.email?(r(),a("p",K,m(o(l).errors.email),1)):c("",!0)]),e("div",null,[s[8]||(s[8]=e("label",{class:"form-label"},"Temporary password",-1)),p(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>o(l).password=t),type:"password",class:"form-input"},null,512),[[b,o(l).password]]),o(l).errors.password?(r(),a("p",O,m(o(l).errors.password),1)):c("",!0)]),e("div",null,[s[9]||(s[9]=e("label",{class:"form-label"},"Role",-1)),p(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>o(l).role=t),class:"form-input"},[(r(!0),a(f,null,x(u.roles,t=>(r(),a("option",{key:t,value:t},m(t),9,Q))),128))],512),[[y,o(l).role]])]),e("button",{type:"submit",class:"w-full rounded-lg bg-blue-600 px-4 py-2 font-semibold text-white",disabled:o(l).processing}," Add team member ",8,W)],32)])])]),_:1}))}},te=B(X,[["__scopeId","data-v-f127d16b"]]);export{te as default};
