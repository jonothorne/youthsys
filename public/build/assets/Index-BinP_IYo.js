import{u as C,c as D,w as u,a as m,b as o,h as A,d as t,t as n,o as a,e as d,F as _,r as b,l as h,f as g,g as x,i as V,j as c,v as f,k as N,m as y}from"./app-BLgsry9J.js";import{_ as $}from"./AuthenticatedLayout-D2_lnWaz.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevron-right-DFDfQR1M.js";const T={class:"space-y-6"},B={class:"grid gap-6 lg:grid-cols-3"},I={class:"panel p-6 lg:col-span-2"},L={class:"flex items-center justify-between"},P={class:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600"},U={class:"mt-4 overflow-x-auto"},F={class:"min-w-full divide-y divide-border text-sm"},M={class:"divide-y divide-slate-100 bg-white"},O={class:"py-3"},E={class:"font-semibold text-slate-900"},R={class:"text-xs text-slate-500"},W={class:"py-3 text-slate-600"},Y={class:"py-3"},q={class:"py-3 text-right"},z={class:"flex flex-wrap justify-end gap-3 text-sm font-semibold"},G=["onClick"],H=["onClick"],J={key:0},K={class:"panel p-6"},Q={key:0,class:"form-error"},X=["disabled"],Z={class:"panel p-6"},tt={class:"mt-4 overflow-x-auto"},et={class:"min-w-full divide-y divide-border text-sm"},st={class:"divide-y divide-slate-100 bg-white"},ot={class:"py-3"},lt={class:"py-3 text-slate-600"},nt={class:"py-3"},it={class:"py-3 text-right"},at={class:"flex flex-wrap justify-end gap-3 text-sm font-semibold"},dt=["onClick"],rt=["onClick"],ct={key:0},pt={__name:"Index",props:{sessions:Array,archivedSessions:Array},setup(r){const l=C({session_date:new Date().toISOString().slice(0,10),session_type:"weekly",name:"Alive Youth",location:"Alive Church"}),w=()=>{l.post(route("admin.attendance.store"))},k=i=>{confirm("Archive this register?")&&y.post(route("admin.attendance.archive",i),{},{preserveScroll:!0})},v=i=>{confirm("Delete this register? This cannot be undone.")&&y.delete(route("admin.attendance.destroy",i))},S=i=>{y.post(route("admin.attendance.restore",i),{},{preserveScroll:!0})};return(i,e)=>(a(),D($,null,{default:u(()=>[m(o(A),{title:"Attendance"}),t("div",T,[t("div",B,[t("section",I,[t("div",L,[e[4]||(e[4]=t("div",null,[t("p",{class:"text-sm font-semibold text-slate-900"},"Registers"),t("p",{class:"text-xs text-slate-500"},"Past and upcoming sessions")],-1)),t("span",P,n(r.sessions.length)+" active",1)]),t("div",U,[t("table",F,[e[7]||(e[7]=t("thead",{class:"bg-slate-50 text-left text-xs font-semibold uppercase tracking-wide text-slate-500"},[t("tr",null,[t("th",{class:"py-2"},"Date"),t("th",{class:"py-2"},"Type"),t("th",{class:"py-2"},"Present"),t("th")])],-1)),t("tbody",M,[(a(!0),d(_,null,b(r.sessions,s=>(a(),d("tr",{key:s.id,class:"hover:bg-slate-50"},[t("td",O,[t("p",E,n(new Date(s.session_date).toLocaleDateString()),1),t("p",R,n(s.name),1)]),t("td",W,n(s.session_type),1),t("td",Y,n(s.present_count??0),1),t("td",q,[t("div",z,[m(o(h),{href:i.route("admin.attendance.show",s.id),class:"text-indigo-600"},{default:u(()=>[...e[5]||(e[5]=[g("Open",-1)])]),_:1},8,["href"]),t("button",{class:"text-amber-600",onClick:p=>k(s.id)},"Archive",8,G),t("button",{class:"text-rose-600",onClick:p=>v(s.id)},"Delete",8,H)])])]))),128)),r.sessions.length?x("",!0):(a(),d("tr",J,[...e[6]||(e[6]=[t("td",{colspan:"4",class:"py-6 text-center text-sm text-slate-500"},"No sessions yet.",-1)])]))])])])]),t("section",K,[e[13]||(e[13]=t("p",{class:"text-sm font-semibold text-slate-900"},"Create session",-1)),e[14]||(e[14]=t("p",{class:"text-xs text-slate-500"},"Prefill your weekly gatherings",-1)),t("form",{class:"mt-4 space-y-4",onSubmit:V(w,["prevent"])},[t("div",null,[e[8]||(e[8]=t("label",{class:"form-label"},"Date",-1)),c(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o(l).session_date=s),type:"date",class:"form-input"},null,512),[[f,o(l).session_date]]),o(l).errors.session_date?(a(),d("p",Q,n(o(l).errors.session_date),1)):x("",!0)]),t("div",null,[e[9]||(e[9]=t("label",{class:"form-label"},"Name",-1)),c(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o(l).name=s),class:"form-input"},null,512),[[f,o(l).name]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"form-label"},"Location",-1)),c(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>o(l).location=s),class:"form-input"},null,512),[[f,o(l).location]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"form-label"},"Session type",-1)),c(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>o(l).session_type=s),class:"form-input"},[...e[11]||(e[11]=[t("option",{value:"weekly"},"Weekly",-1),t("option",{value:"event"},"Event",-1)])],512),[[N,o(l).session_type]])]),t("button",{type:"submit",class:"w-full rounded-2xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white",disabled:o(l).processing}," Create & open register ",8,X)],32)])]),t("section",Z,[e[18]||(e[18]=t("div",{class:"flex items-center justify-between"},[t("div",null,[t("p",{class:"text-sm font-semibold text-slate-900"},"Archived sessions"),t("p",{class:"text-xs text-slate-500"},"Stored for reference")])],-1)),t("div",tt,[t("table",et,[e[17]||(e[17]=t("thead",{class:"bg-slate-50 text-left text-xs font-semibold uppercase tracking-wide text-slate-500"},[t("tr",null,[t("th",{class:"py-2"},"Date"),t("th",{class:"py-2"},"Type"),t("th",{class:"py-2"},"Present"),t("th")])],-1)),t("tbody",st,[(a(!0),d(_,null,b(r.archivedSessions,s=>(a(),d("tr",{key:`arch-${s.id}`,class:"hover:bg-slate-50"},[t("td",ot,n(new Date(s.session_date).toLocaleDateString()),1),t("td",lt,n(s.session_type),1),t("td",nt,n(s.present_count??0),1),t("td",it,[t("div",at,[m(o(h),{href:i.route("admin.attendance.show",s.id),class:"text-indigo-600"},{default:u(()=>[...e[15]||(e[15]=[g("Open",-1)])]),_:1},8,["href"]),t("button",{class:"text-emerald-600",onClick:p=>S(s.id)},"Restore",8,dt),t("button",{class:"text-rose-600",onClick:p=>v(s.id)},"Delete",8,rt)])])]))),128)),r.archivedSessions.length?x("",!0):(a(),d("tr",ct,[...e[16]||(e[16]=[t("td",{colspan:"4",class:"py-6 text-center text-sm text-slate-500"},"No archived sessions.",-1)])]))])])])])])]),_:1}))}},yt=j(pt,[["__scopeId","data-v-8f612103"]]);export{yt as default};
