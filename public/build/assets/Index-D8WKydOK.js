import{u as y,c as h,w as k,a as w,b as c,h as C,d as e,o as r,e as u,F as m,r as f,t as d,n as $,g as S,j as T,v as j,D as b,m as N}from"./app-DMZ8zcZC.js";import{_ as B}from"./AuthenticatedLayout-CiYXRCFR.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chevron-right-CTFrNRb6.js";const I={class:"grid gap-6 lg:grid-cols-3"},R={class:"panel p-6 lg:col-span-2"},A={class:"flex flex-wrap items-center justify-between gap-3"},D={class:"flex flex-wrap items-center gap-2 text-xs"},F={class:"mt-4 overflow-x-auto"},M={class:"min-w-full divide-y divide-border text-sm"},U={class:"divide-y divide-slate-100 bg-white"},z={class:"px-4 py-3"},E=["checked","onChange"],L={class:"px-4 py-3"},P={class:"font-semibold text-slate-900"},W={class:"text-xs text-slate-500"},q={class:"px-4 py-3 text-lg font-semibold text-emerald-600"},G=["onClick"],H={class:"px-4 py-3 text-right"},J={class:"space-x-2"},K=["onClick"],O=["onClick"],Q=["onClick"],X=["onClick"],Y={class:"panel flex flex-col gap-6 p-6"},Z={class:"mt-4 space-y-3 text-sm"},ee={class:"font-semibold text-slate-900"},te={class:"text-xs text-slate-500"},se={key:0,class:"text-sm text-slate-500"},le={__name:"Index",props:{accounts:Array,recentTransactions:Array},setup(p){const o=b([]),i=y({young_person_ids:[],amount:1,reason:"Reward earned"}),_=b("Manual adjustment"),v=l=>{o.value.includes(l)?o.value=o.value.filter(s=>s!==l):o.value.push(l)},n=(l,s=null)=>{i.amount=l,i.young_person_ids=s?[s]:[...o.value],i.young_person_ids.length&&i.post(route("admin.tokens.adjust"),{preserveScroll:!0,onSuccess:()=>{o.value=[]}})},g=l=>{const s=l.token_account?.balance??0,t=prompt(`Set new token balance for ${l.first_name}`,s);if(t===null||t==="")return;const a=parseInt(t,10);if(isNaN(a)){alert("Please enter a valid number");return}const x=a-s;x!==0&&N.post(route("admin.tokens.adjust"),{young_person_ids:[l.id],amount:x,reason:_.value},{preserveScroll:!0})};return(l,s)=>(r(),h(B,null,{default:k(()=>[w(c(C),{title:"Tokens"}),e("div",I,[e("section",R,[e("div",A,[s[6]||(s[6]=e("div",null,[e("p",{class:"text-sm font-semibold text-slate-900"},"Token balances"),e("p",{class:"text-xs text-slate-500"},"Select multiple and apply actions")],-1)),e("div",D,[e("button",{class:"rounded-full bg-slate-100 px-3 py-1 font-semibold text-slate-600",onClick:s[0]||(s[0]=t=>o.value=[])},"Clear"),e("button",{class:"rounded-full bg-emerald-600 px-3 py-1 font-semibold text-white",onClick:s[1]||(s[1]=t=>n(1))},"+1 selected"),e("button",{class:"rounded-full bg-emerald-700 px-3 py-1 font-semibold text-white",onClick:s[2]||(s[2]=t=>n(5))},"+5 selected"),e("button",{class:"rounded-full bg-rose-400 px-3 py-1 font-semibold text-white",onClick:s[3]||(s[3]=t=>n(-1))},"-1 selected"),e("button",{class:"rounded-full bg-rose-600 px-3 py-1 font-semibold text-white",onClick:s[4]||(s[4]=t=>n(-5))},"-5 selected")])]),e("div",F,[e("table",M,[s[7]||(s[7]=e("thead",{class:"bg-slate-50 text-left text-xs font-semibold uppercase tracking-wide text-slate-500"},[e("tr",null,[e("th",{class:"px-4 py-3"}),e("th",{class:"px-4 py-3"},"Name"),e("th",{class:"px-4 py-3"},"Balance"),e("th",{class:"px-4 py-3 text-right"},"Actions")])],-1)),e("tbody",U,[(r(!0),u(m,null,f(p.accounts,t=>(r(),u("tr",{key:t.id,class:"hover:bg-slate-50"},[e("td",z,[e("input",{type:"checkbox",checked:o.value.includes(t.id),onChange:a=>v(t.id)},null,40,E)]),e("td",L,[e("p",P,d(t.first_name)+" "+d(t.last_name),1),e("p",W,d(t.preferred_name),1)]),e("td",q,[e("button",{class:"hover:text-emerald-700",onClick:a=>g(t)},d(t.token_account?.balance??0),9,G)]),e("td",H,[e("div",J,[e("button",{class:"rounded-full bg-emerald-600 px-3 py-1 text-xs font-semibold text-white",onClick:a=>n(1,t.id)},"+1",8,K),e("button",{class:"rounded-full bg-emerald-700 px-3 py-1 text-xs font-semibold text-white",onClick:a=>n(5,t.id)},"+5",8,O),e("button",{class:"rounded-full bg-rose-400 px-3 py-1 text-xs font-semibold text-white",onClick:a=>n(-1,t.id)},"-1",8,Q),e("button",{class:"rounded-full bg-rose-600 px-3 py-1 text-xs font-semibold text-white",onClick:a=>n(-5,t.id)},"-5",8,X)])])]))),128))])])])]),e("section",Y,[e("div",null,[s[8]||(s[8]=e("p",{class:"text-sm font-semibold text-slate-900"},"Recent activity",-1)),e("ul",Z,[(r(!0),u(m,null,f(p.recentTransactions,t=>(r(),u("li",{key:t.id,class:"flex items-center justify-between rounded-2xl border border-slate-100 px-3 py-2"},[e("div",null,[e("p",ee,d(t.young_person.first_name),1),e("p",te,d(t.reason??t.type),1)]),e("span",{class:$([t.amount>0?"text-emerald-600":"text-rose-500","font-semibold"])},d(t.amount>0?"+":"")+d(t.amount),3)]))),128)),p.recentTransactions.length?S("",!0):(r(),u("li",se,"No token movements yet."))])]),e("div",null,[s[9]||(s[9]=e("p",{class:"text-sm font-semibold text-slate-900"},"Reason",-1)),T(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>c(i).reason=t),class:"form-input mt-2",placeholder:"eg. Worship team"},null,512),[[j,c(i).reason]])]),s[10]||(s[10]=e("div",{class:"rounded-2xl border border-slate-100 bg-slate-50 p-4 text-sm text-slate-600"},[e("p",{class:"font-semibold text-slate-900"},"Tips"),e("ul",{class:"mt-2 list-disc space-y-1 pl-5"},[e("li",null,"Select multiple youth for group rewards."),e("li",null,"Use negative values to redeem in the shop."),e("li",null,"Tie reasons to events for better reporting.")])],-1))])])]),_:1}))}},ie=V(le,[["__scopeId","data-v-52dd9b0b"]]);export{ie as default};
